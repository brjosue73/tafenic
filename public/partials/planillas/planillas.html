<!--
  REPORTE PLANILLA CATORCENAL
-->
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 view_body" data-ui-view>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 tarjeta blanco m-top_dow">
    <h1>Planilla Catorcenal</h1>
    <form class="col-xs-12 col-sm-12 col-md-12 col-lg-12" method="post" action="reporte_catorcenal">
      <div class="form-group col-md-4">
        <label for="" class="control-label">De: </label>
        <input name="fecha_ini" type="date" class="form-control" data-ng-model="plillaSendData.fecha_ini">
      </div>
      <div class="form-group col-md-4">
        <label for="" class="control-label">Hasta: </label>
        <input name="fecha_fin" type="date" class="form-control" data-ng-model="plillaSendData.fecha_fin">
      </div>
      <div class="form-group col-sm-4 col-md-4 col-lg-4">
        <label for="">Buscar por Nombre: </label> <!--<% busquedaCriteria %>-->
        <input type="text" class="form-control" data-ng-model="busqueda">
      </div>

       <div class="form-group col-sm-3 col-md-4 col-lg-3">

        <label class="control-label"> Opciones Impresos: </label>
        <div class="form-control" style="border: none; box-shadow:none">
          <input type="radio" id="Choice1" name="inss" value="2">
          <label for="Choice1"> General </label>

          <input type="radio" id="Choice2" name="inss" value="1">
          <label for="Choice2"> Con INSS </label>

          <input type="radio" id="Choice3" name="inss" value="0">
          <label for="Choice3"> Sin INSS </label>
        </div>
      </div>

      <div class="form-group col-md-1">
        <br>
        <input type="button" class="btn btn-default btn-primary" data-ng-click="getPlanilla()" value="Generar">
        <i id="14nalpanepin" class="fa fa-spinner fa-pulse fa-lg" style="color:blue; display:none;"></i>
        <span id="14nalexitopin" style="color:green; display:none;"><i class="fa fa-check-circle fa-lg"></i></span>
        <span id="14nalerrorpin" style="color:Red; display:none;"><i class="fa fa-times-circle fa-lg"></i></span>
      </div>
      <div class="form-group col-md-2">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Generar Imprimible">
      </div>
      <div class="form-group col-md-2">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Generar sobres">
      </div>
      <div class="form-group col-md-1">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Billetes">
      </div>
      <div class="form-group col-md-2">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Reporte INSS">
      </div>
      <div class="form-group col-md-2">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Reporte DGI">
      </div>
      <div class="form-group col-md-2">
        <br>
        <input type="submit" class="btn btn-default btn-primary" name="funcion" value="Rep. Excel">
      </div>
    </form>
  </div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-responsive table-container">
    <table class="table table-striped table-bordered table-hover table-condensed">
      <thead>
        <tr class="active">
          <th>N°</th>
          <th data-ng-click="ordenar = 'nombre' ">Nombre</th>
          <th>Fincas</th>
          <th>Ocupación</th>
          <th>dias <br> Lab</th>
          <th>Días trab.</th>
          <th>Tot. Devengado</th>
          <th>Alimentación</th>
          <th>Tot. Básico</th>
          <th>septimo</th>
          <th>Subsidio</th>
          <th>Otros</th>
          <th>Feriados</th>
          <th>Tot. Dev 2</th>

          <th>Hrs Ext.</th>
          <th>Tot H. Ext.</th>
          <th data-ng-click="ordenar = '-cant_act_ext' ">Act. Ext.</th>
          <th>Tot. Act. Ext.</th>

          <th>Vacaciones</th>
          <th>Aguinaldo</th>
          <th>Tot.Acumulado</th>
          <th>INSS laboral</th>
          <th>Préstamos</th>
          <th>Tot. a Recibir</th>
          <th>INSS patronal</th>
          <th>finc. Sep.</th>
          <th>Acción</th>

        </tr>
      </thead>
      <tbody>
        <tr data-ng-repeat="reporfincTota in reporfincTot | orderBy:ordenar | filter:busqueda as results">

          <td> <% $index + 1 %></td>
          <td> <% reporfincTota.nombre %> </td>
          <td> <li data-ng-repeat="fincass in reporfincTota.finUnicas track by $index"><% fincass %> </li></td>
          <td> <li data-ng-repeat="labour in reporfincTota.labUnicas track by $index"><% labour %> </li></td>
          <td> <li data-ng-repeat="labday in reporfincTota.cantLabs track by $index"><% labday %> </li></td>
          <td> <% reporfincTota.dias %> </td>
          <td> <% reporfincTota.total_deven %> </td>
          <td> <% reporfincTota.alim_tot %> </td>
          <td> <% reporfincTota.total_basic %> </td>
          <td> <% reporfincTota.total_septimo %> </td>
          <td><% reporfincTota.subsidio %></td>
          <td><% reporfincTota.otros %></td>
          <td><% reporfincTota.feriados %></td>
          <td><% reporfincTota.devengado2 %></td>

          <td><% reporfincTota.cant_horas_ext%>  </td>
          <td><% reporfincTota.horas_ext_tot %></td>
          <td><% reporfincTota.cant_act_ext%>  </td>
          <td><% reporfincTota.act_extra_tot %></td>

          <td><% reporfincTota.vac_tot %></td>
          <td><% reporfincTota.agui_tot %></td>
          <td> <% reporfincTota.total_acum %> </td>
          <td><% reporfincTota.inss %></td>
          <td><% reporfincTota.prestamos %></td>
          <td> <% reporfincTota.salario_ %> </td>
          <td><% reporfincTota.inss_patronal %></td>


          <td> <% reporfincTota.finca_septimo %> </td>
          <td><a href=""  data-toggle="modal" data-target="#uncatorcenal" data-ng-click="revision(reporfincTota.id_trab, $index, reporfincTota.fecha_ini, reporfincTota.fecha_fin)">Revisar</a></td>


        </tr>
        <tr>
          <td colspan="4">Total</td>
          <td><% totales.sum_dias_trab %></td>
          <td><% totales.sum_dias_trab %></td>
          <td><% totales.sum_dev1 %></td>
          <td><% totales.sum_alim %></td>
          <td><% totales.sum_basico %></td>
          <td><% totales.sum_septimos %></td>
          <td><% totales.sum_subsidios %></td>
          <td><% totales.sum_otros %></td>
          <td><% totales.sum_feriados %></td>
          <td><% totales.sum_dev2 %></td>

          <td><% totales.sum_h_ext %></td>
          <td><% totales.sum_tot_hext %></td>
          <td><% totales.sum_act_extra_tot %></td>
          <td><% totales.sum_dinero_activ %></td>

          <td><% totales.sum_vacs %></td>
          <td><% totales.sum_aguin %></td>
          <td><% totales.sum_acum %></td>
          <td><% totales.sum_inss_lab %></td>
          <td><% totales.sum_prestam %></td>
          <td><% totales.sum_tot_recib %></td>
          <td><% totales.sum_inss_pat %></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!--************************************************************************************
                            VALORES MODAL START
****************************************************************************************-->
  <div class="modal fade" id="uncatorcenal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button class="close" aria-hidden="true" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"><% nombre14 %></h4>
        </div>
        <div class="modal-body">
          <table class="table table-striped table-bordered table-hover table-condensed">
            <thead>
              <tr class="active">
                <th>N°</th>
                <th>Fecha</th>
                <th>Finca</th>
                <th>Actividad</th>
                <th>Labor</th>
                <th>Horas Trab.</th>
                <th>Horas Ext.</th>
                <th>Cuje G.</th>
                <th>Cuje P.</th>
                <th>Safa G.</th>
                <th>Safa P.</th>
                <th>Feriado</th>
                <th>Otros</th>
                <th>Prestamos</th>
                <th class="text-center" colspan="2">Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr data-ng-repeat="rTrab14 in trab14">
                <td> <% $index + 1 %></td>
                <td> <% rTrab14.fecha %> </td>
                <td> <% rTrab14.finca %> </td>
                <td> <% rTrab14.actividad %> </td>
                <td> <% rTrab14.labor %> </td>
                <td> <% rTrab14.hora_trab %> </td>
                <td> <% rTrab14.hora_ext %> </td>
                <td> <% rTrab14.tot_cuje_gran %> </td>
                <td> <% rTrab14.tot_cuje_peq %> </td>
                <td> <% rTrab14.tot_safa_gran %> </td>
                <td> <% rTrab14.tot_safa_peq %> </td>
                <td> <% rTrab14.feriados %> </td>
                <td> <% rTrab14.otros %> </td>
                <td> <% rTrab14.prestamo %> </td>
                <!-- <td><span class="blue-anchor" data-ng-click="updCatorce(rTrab14.id)">update</span></td> -->
                <td> <a target="_blank" href="/preplanilla/<% rTrab14.id %>/edit">Actualizar</a></td>
                <!-- <td><a href="" data-ui-sref="/preplanilla.editar({id: <% rTrab14.id %>})">update</a></td> -->
                <td><span class="blue-anchor" data-ng-click="delCatorce(rTrab14.id, $index, rTrab14.fecha)">eliminar</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <i id="" class="fa fa-spinner fa-pulse fa-lg" style="color:blue; display:none;"></i>
          <span id="" style="color:green; display:none;">Cambio Guardado! <i class="fa fa-check-circle fa-lg"></i></span>
          <span id="" style="color:Red; display:none;">Error: vuelve a intentarlo <i class="fa fa-times-circle fa-lg"></i></span>
          <!-- <button id="" class="btn btn-primary" data-ng-click="" >aceptar</button> -->
          <button class="btn btn-primary" data-dismiss="modal">cerrar</button>
        </div>
      </div>
    </div>
  </div>
<!--************************************************************************************
                                VALORES MODAL END
****************************************************************************************-->
